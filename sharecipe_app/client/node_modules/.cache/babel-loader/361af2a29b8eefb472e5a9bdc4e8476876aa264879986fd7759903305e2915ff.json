{"ast":null,"code":"import React,{useState,useEffect}from'react';import{GoogleOAuthProvider,GoogleLogin}from'@react-oauth/google';import{Card,Button,Toast,ToastContainer}from'react-bootstrap';import jwtDecode from'jwt-decode';import{FaGoogle}from'react-icons/fa';import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const LoginForm=()=>{const[user,setUser]=useState(null);const[isLoggedIn,setIsLoggedIn]=useState(false);const[showToast,setShowToast]=useState(false);const[toastMessage,setToastMessage]=useState('');useEffect(()=>{const storedUser=localStorage.getItem('user');if(storedUser!==null){setUser(JSON.parse(storedUser));setIsLoggedIn(true);}},[]);const handleLoginSuccess=response=>{if(response&&response.credential){const details=jwtDecode(response.credential);setUser(details);setIsLoggedIn(true);localStorage.setItem('user',JSON.stringify(details));}else{console.error('Invalid credential response');setShowToast(true);setToastMessage('Login failed!');}};const handleLogout=()=>{setUser(null);setIsLoggedIn(false);localStorage.removeItem('user');};return/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-center align-items-center min-vh-100\",children:[/*#__PURE__*/_jsx(Card,{className:\"p-4\",style:{width:'100%',maxWidth:'600px'},children:isLoggedIn&&user?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-center mb-4\",children:[\"Welcome, \",user.name,\"!\"]}),/*#__PURE__*/_jsx(Button,{className:\"w-100\",variant:\"primary\",onClick:handleLogout,children:\"Logout\"})]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center mb-4\",children:\"Login\"}),/*#__PURE__*/_jsx(GoogleOAuthProvider,{clientId:\"85792757464-4cer7qi0js1n067bhd9ca0ovcdcan1qg.apps.googleusercontent.com\",children:/*#__PURE__*/_jsx(GoogleLogin,{onSuccess:handleLoginSuccess,onError:()=>{console.log('Login Failed');setShowToast(true);setToastMessage('Google sign-in failed!');},render:_ref=>{let{onClick}=_ref;return/*#__PURE__*/_jsxs(Button,{className:\"w-100 mt-2 btn-light border\",style:{display:'flex',alignItems:'center',justifyContent:'center'},onClick:onClick,children:[/*#__PURE__*/_jsx(FaGoogle,{className:\"me-2\"}),\" Sign in with Google\"]});}})})]})}),/*#__PURE__*/_jsx(ToastContainer,{position:\"top-end\",className:\"p-3\",children:/*#__PURE__*/_jsxs(Toast,{onClose:()=>setShowToast(false),show:showToast,delay:3000,autohide:true,children:[/*#__PURE__*/_jsx(Toast.Header,{children:/*#__PURE__*/_jsx(\"strong\",{className:\"me-auto\",children:\"Notification\"})}),/*#__PURE__*/_jsx(Toast.Body,{children:toastMessage})]})})]});};export default LoginForm;","map":{"version":3,"names":["React","useState","useEffect","GoogleOAuthProvider","GoogleLogin","Card","Button","Toast","ToastContainer","jwtDecode","FaGoogle","jsxs","_jsxs","jsx","_jsx","LoginForm","user","setUser","isLoggedIn","setIsLoggedIn","showToast","setShowToast","toastMessage","setToastMessage","storedUser","localStorage","getItem","JSON","parse","handleLoginSuccess","response","credential","details","setItem","stringify","console","error","handleLogout","removeItem","className","children","style","width","maxWidth","name","variant","onClick","clientId","onSuccess","onError","log","render","_ref","display","alignItems","justifyContent","position","onClose","show","delay","autohide","Header","Body"],"sources":["/home/berrybug/Desktop/ShaRecipe/sharecipe_app/frontend/src/components/Login.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { GoogleOAuthProvider, GoogleLogin } from '@react-oauth/google';\nimport { Card, Button, Toast, ToastContainer } from 'react-bootstrap';\nimport jwtDecode from 'jwt-decode';\nimport { FaGoogle } from 'react-icons/fa';\n\nconst LoginForm = () => {\n  const [user, setUser] = useState(null);\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [showToast, setShowToast] = useState(false);\n  const [toastMessage, setToastMessage] = useState('');\n\n  useEffect(() => {\n    const storedUser = localStorage.getItem('user');\n    if (storedUser !== null) {\n      setUser(JSON.parse(storedUser));\n      setIsLoggedIn(true);\n    }\n  }, []);\n\n  const handleLoginSuccess = (response) => {\n    if (response && response.credential) {\n      const details = jwtDecode(response.credential);\n      setUser(details);\n      setIsLoggedIn(true);\n      localStorage.setItem('user', JSON.stringify(details));\n    } else {\n      console.error('Invalid credential response');\n      setShowToast(true);\n      setToastMessage('Login failed!');\n    }\n  };\n\n  const handleLogout = () => {\n    setUser(null);\n    setIsLoggedIn(false);\n    localStorage.removeItem('user');\n  };\n\n  return (\n    <div className=\"d-flex justify-content-center align-items-center min-vh-100\">\n      <Card className=\"p-4\" style={{ width: '100%', maxWidth: '600px' }}>\n        {isLoggedIn && user ? (\n          <div>\n            <h2 className=\"text-center mb-4\">Welcome, {user.name}!</h2>\n            <Button className=\"w-100\" variant=\"primary\" onClick={handleLogout}>\n              Logout\n            </Button>\n          </div>\n        ) : (\n          <div>\n            <h2 className=\"text-center mb-4\">Login</h2>\n            <GoogleOAuthProvider clientId=\"85792757464-4cer7qi0js1n067bhd9ca0ovcdcan1qg.apps.googleusercontent.com\">\n              <GoogleLogin\n                onSuccess={handleLoginSuccess}\n                onError={() => {\n                  console.log('Login Failed');\n                  setShowToast(true);\n                  setToastMessage('Google sign-in failed!');\n                }}\n                render={({ onClick }) => (\n                  <Button\n                    className=\"w-100 mt-2 btn-light border\"\n                    style={{ display: 'flex', alignItems: 'center', justifyContent: 'center' }}\n                    onClick={onClick}\n                  >\n                    <FaGoogle className=\"me-2\" /> Sign in with Google\n                  </Button>\n                )}\n              />\n            </GoogleOAuthProvider>\n          </div>\n        )}\n      </Card>\n\n      <ToastContainer position=\"top-end\" className=\"p-3\">\n        <Toast\n          onClose={() => setShowToast(false)}\n          show={showToast}\n          delay={3000}\n          autohide\n        >\n          <Toast.Header>\n            <strong className=\"me-auto\">Notification</strong>\n          </Toast.Header>\n          <Toast.Body>{toastMessage}</Toast.Body>\n        </Toast>\n      </ToastContainer>\n    </div>\n  );\n};\n\nexport default LoginForm;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}